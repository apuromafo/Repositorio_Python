# -*- coding: utf-8 -*-
# Script completo que eval煤a y compara editores de notas/apuntes, incluyendo
# aplicaciones dedicadas (E2EE) y editores de c贸digo (MD/Velocidad),
# con foco en la seguridad para profesionales de Pentesting.

import sys

# C贸digos ANSI para colores y formatos
class Colors:
    BLUE = "\033[94m"
    GREEN = "\033[92m"
    RED = "\033[91m"
    YELLOW = "\033[93m"  # <-- Definici贸n de color amarillo
    END = "\033[0m"
    BOLD = "\033[1m"
    HEADER = BOLD + BLUE
    INFO = YELLOW        # <-- Alias para informaci贸n/advertencia (amarillo)
    CRITERIA = BOLD + GREEN
    DANGER = BOLD + RED

# Datos de la tabla COMPLETA y AMPLIA.
# Herramienta: [Tipo, Sencillez, Encriptaci贸n, Uso en nube]
HERRAMIENTAS = {
    "Logseq": ["Knowledge Graph", 4, 5, 5],
    "Notesnook": ["Notas Seguras (E2EE)", 5, 5, 4],
    "Turtl": ["Notas Seguras (E2EE)", 4, 5, 4],
    "Standard Notes": ["Notas Seguras (E2EE)", 4, 5, 4],
    "Joplin": ["Markdown + E2EE", 3, 5, 4],
    "Obsidian": ["Markdown + Local", 4, 3, 4],
    "Simplenote": ["Notas Simples", 5, 3, 5],
    "Trilium Notes": ["Auto-hospedado", 3, 4, 3],
    "Evernote": ["Nube + Usabilidad", 5, 2, 5],
    "VS Code": ["Editor de C贸digo (MD)", 4, 1, 5],
    "Notepad++": ["Editor de Texto (Velocidad)", 5, 1, 4]
}

def calcular_total(herramienta):
    """Calcula la suma de las puntuaciones de las 煤ltimas 3 columnas."""
    return sum(HERRAMIENTAS[herramienta][1:])

def imprimir_tabla():
    """Imprime la tabla de evaluaci贸n de herramientas en formato ASCII."""
    
    print(f"{Colors.HEADER}\n*****************************************************************************************************************{Colors.END}")
    print(f"{Colors.HEADER} GUA DE SELECCIN DE EDITORES DE APUNTES: E2EE vs. MARKDOWN {Colors.END}")
    print(f"{Colors.HEADER}*****************************************************************************************************************{Colors.END}")
    
    # Encabezados de la tabla
    headers = ["Herramienta", "Tipo Principal", "Sencillez (1-5)", "Encriptaci贸n (1-5)", "Uso en nube (1-5)", "Total"]
    
    # Calcular anchos de columna din谩micamente
    all_tools = list(HERRAMIENTAS.keys())
    types = [HERRAMIENTAS[k][0] for k in all_tools]
    
    col_widths = [
        max(len(headers[0]), max(len(k) for k in all_tools)) + 1,
        max(len(headers[1]), max(len(t) for t in types)) + 1,
        max(len(headers[2]), 15) + 1,
        max(len(headers[3]), 18) + 1,
        max(len(headers[4]), 16) + 1,
        max(len(headers[5]), 5) + 1
    ]
    
    # Funci贸n para generar el separador horizontal
    def get_separator(widths):
        sep = "+"
        for width in widths:
            sep += f"{'-' * width}+"
        return sep

    separator = get_separator(col_widths)

    print(separator)
    
    # Imprimir encabezados
    header_line = "|"
    for i, header in enumerate(headers):
        if i < 2:
            header_line += f" {Colors.BOLD}{header.ljust(col_widths[i] - 1)}{Colors.END} |"
        else:
            header_line += f" {Colors.CRITERIA}{header.center(col_widths[i] - 1)}{Colors.END} |"
    
    print(header_line)
    print(separator)

    # Imprimir filas de datos ordenadas por Total
    sorted_tools = sorted(HERRAMIENTAS.keys(), key=lambda k: calcular_total(k), reverse=True)
    
    for tool in sorted_tools:
        data = HERRAMIENTAS[tool]
        tool_type = data[0]
        scores = data[1:]
        total = calcular_total(tool)
        
        row_line = f"| {tool.ljust(col_widths[0] - 1)} | {tool_type.ljust(col_widths[1] - 1)} |"
        
        # Puntuaciones
        for i, score in enumerate(scores):
            # Formato condicional: Encriptaci贸n (铆ndice 1 de las puntuaciones)
            color = Colors.YELLOW
            if i == 1:
                color = Colors.RED if score <= 3 else Colors.GREEN
            
            row_line += f" {color}{str(score).center(col_widths[i+2] - 1)}{Colors.END} |"
        
        # Columna Total
        row_line += f" {Colors.BOLD}{str(total).center(col_widths[5] - 1)}{Colors.END} |"
        print(row_line)
        print(separator)

    # --- Resumen y Justificaci贸n ---
    print(f"\n{Colors.HEADER} RESUMEN Y JUSTIFICACIN TCNICA{Colors.END}")
    print(f"{Colors.INFO}* La puntuaci贸n es indicativa y balancea usabilidad, seguridad (E2EE) y versatilidad (MD).{Colors.END}")

    print(f"\n{Colors.DANGER}{Colors.BOLD}SEGURIDAD (E2EE) VS MARKDOWN PURO:{Colors.END}")
    print(f" - Si el dato es {Colors.DANGER}SENSIBLE{Colors.END}: Prioriza herramientas con E2EE ({Colors.GREEN}Logseq, Notesnook, Joplin, Standard Notes{Colors.END}).")
    # CORRECCIN DE ERROR: Usar Colors.INFO (que es el alias para YELLOW)
    print(f" - Si el dato es {Colors.INFO}PBLICO o INTERNO{Colors.END}: Prioriza la velocidad y el MD ({Colors.GREEN}Obsidian, VS Code{Colors.END}).") 
    
    print(f"\n{Colors.BLUE}{Colors.BOLD}ANLISIS DE EDITORES DE CDIGO (VS Code / Notepad++):{Colors.END}")
    print(f" - {Colors.BOLD}Baja Encriptaci贸n (Score 1):{Colors.END} Estas herramientas {Colors.RED}NO cifran el contenido de la nota.{Colors.END} La seguridad recae completamente en el sistema operativo (BitLocker) o en el cifrado del repositorio Git.")
    print(f" - {Colors.BOLD}Alto Uso en Nube (Score 5):{Colors.END} VS Code destaca por su integraci贸n nativa con {Colors.GREEN}Git/GitHub/GitLab{Colors.END}, lo que lo convierte en el est谩ndar para versionar informes (.md) y colaborar en equipo.")
    print(f" - {Colors.BOLD}Notepad++ (Velocidad):{Colors.END} Es el m谩s r谩pido en entornos Windows para notas vol谩tiles, pero el m谩s limitado en formato Markdown y gesti贸n de archivos complejos.")


if __name__ == "__main__":
    try:
        imprimir_tabla()
    except KeyboardInterrupt:
        print(f"\n{Colors.RED}Gu铆a de apuntes interrumpida por el usuario.{Colors.END}")
        sys.exit(0)